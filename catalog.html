<html>
    <head>
        <meta charset="UTF-8">
        <title>My Animes</title>

        <style id="style--reset">
            *{
                margin: 0;
                padding: 0;
                list-style: none;
            }
            body {
                background-color: rgba(224, 241, 249, 0.5);
                font-family: sans-serif;
            }
            #wrapper {
                margin-top: 65px;
            }
            .hidden {
                display: none !important;
            }
        </style>

        <style id="style--menu">
            .menu--button{
                position: fixed;
                z-index: 10;
                top: 0;
            }
            .has-regua .menu--button {
                width: 100%;
                background-color: rgba(103, 181, 209, 0.5);
            }
            .c-menu {
              position: fixed;
              z-index: 200;
              background-color: #67b5d1;
              transition: transform 0.3s;
              width: 100%;
            }

            .c-menu__close,
            .c-button {
              color: #fff;
              background-color: #3184a1;
              font-size: 14px;
              border: none;
              box-shadow: none;
              border-radius: none;
              -webkit-appearance: none;
              -moz-appearance: none;
              appearance: none;
              cursor: pointer;
              width: 100px;
            }
            .c-button:focus,
            .c-menu__close:focus {
              outline: none;
            }

            body.has-active-menu {
              overflow: hidden;
            }

            .c-mask {
              position: fixed;
              z-index: 100;
              top: 0;
              left: 0;
              overflow: hidden;
              width: 0;
              height: 0;
              background-color: #000;
              opacity: 0;
              transition: opacity 0.3s, width 0s 0.3s, height 0s 0.3s;
            }

            .c-mask.is-active {
              width: 100%;
              height: 100%;
              opacity: 0.7;
              transition: opacity 0.3s;
            }
            .c-menu--slide-top
            .c-menu--push-top {
              vertical-align: middle;
              width: 100%;
              height: 60px;
              text-align: center;
              overflow-x: scroll;
            }

            .c-menu--slide-top .c-menu__items,
            .c-menu--push-top .c-menu__items {
              display: inline-block;
              text-align: center;
            }

            .c-menu--slide-top .c-menu__item,
            .c-menu--push-top .c-menu__item {
              display: inline-block;
              line-height: 60px;
            }

            .c-menu--slide-top .c-menu__link,
            .c-menu--push-top .c-menu__link {
              display: block;
              padding: 0 4px;
              color: #fff;
            }

            .c-menu--slide-top .c-menu__close,
            .c-menu--push-top .c-menu__close,
            .c-button{
              display: inline-block;
              margin-right: 12px;
              padding: 0 24px;
              height: 60px;
              line-height: 60px;
            }
            .c-menu--slide-top .c-menu__close{
                margin-right: 100px;
            }

            .c-menu--slide-top,
            .c-menu--push-top {
              top: 0;
              left: 0;
              transform: translateY(-160px);
            }

            .c-menu--slide-top.is-active,
            .c-menu--push-top.is-active {
              transform: translateY(0);
            }
            .o-wrapper.has-push-top {
              transform: translateY(60px);
            }
        </style>

        <style id="style--button-switch">
            .switch__container {
                display: inline-block;
                vertical-align: middle;
            }
            .switch {
              position: absolute;
              margin-left: -9999px;
              visibility: hidden;
            }

            .switch + label {
              display: block;
              position: relative;
              cursor: pointer;
              outline: none;
              user-select: none;
            }

            .switch--shadow + label {
              padding: 2px;
              width: 40px;
              height: 24px;
              background-color: #dddddd;
              border-radius: 60px;
            }
            .switch--shadow + label:before,
            .switch--shadow + label:after {
              display: block;
              position: absolute;
              top: 1px;
              left: 1px;
              bottom: 1px;
              content: "";
            }
            .switch--shadow + label:before {
              right: 1px;
              background-color: #f1f1f1;
              border-radius: 60px;
              transition: all 0.4s;
            }
            .switch--shadow + label:after {
              width: 24px;
              background-color: #fff;
              border-radius: 100%;
              box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
              transition: all 0.4s;
            }
            .switch--shadow:checked + label:before {
              background-color: #8ce196;
            }
            .switch--shadow:checked + label:after {
              transform: translateX(20px);
            }
            .button-label--title {
                color: #fff;
                cursor: pointer;
                display: block;
                position: absolute;
                right: 46px;
                width: 100px;
                top: 7px;
                padding-right: 5px;
                text-align: right;
            }
        </style>

        <style id="style--ruler">
            #ruler{
                display: inline-block;
                line-height: 2em;
                text-align: center;
                overflow: auto;
                vertical-align: middle;
            }
            #ruler span {
                margin: 5px;
                font-size: 1.5em;
            }
            #ruler a {
                color: #fff;
                text-decoration: none;
                text-shadow: 1px 1px #163d4a;
            }
        </style>

        <style id="style--catalog">
            .anime-wrapper {
                position: relative;
                overflow-x: hidden;
            }
            .anime-list {
                display: flex;
                width: 100%;
                flex-wrap: wrap;
            }
            .anime-item {
                display: block;
                width: 200px;
                height: 295px;
                overflow: hidden;
                margin: 5px;
                cursor: pointer;
            }

            .anime-item:hover .name {
                bottom: 101%;
                background-color: rgba(235, 235, 235, .5);
                display: inline-block;
                width: 100%;
                text-align: center;
                color: #fff;
                text-shadow: 1px 1px #000;
                position: absolute;
                padding: 5px 0;
                border-top: 1px solid;
                border-bottom: 1px solid;
            }
            .anime-item:hover .info-title{
                display: none;
            }

            .plus-wrapper {
                position: relative;
            }

            .poster {
                width: 200px;
                height: 295px;
            }
        </style>

        <style id="style--catalog-info">
            .show-info {
                overflow: visible;
            }

            .show-info .plus li {
                line-height: 1.7rem;
            }

            .show-info.anime-item:hover .name {
                all: unset;
            }

            .show-info.anime-item:hover .name,
            .show-info .name {
                float: left;
                width: 70%;
                font-size: 2em;
                line-height: 1.7rem;
                padding-top: 10px;
            }

            .show-info:hover .info-title {
                display: inline-block;
            }
            .show-info .info-title {
                display: inline-block;
                content: "Nome: ";
                font-weight: bold;
                color: rgba(235, 235, 235, .5);
                font-size: 1rem;
                vertical-align: middle;
                padding-right: 10px;
            }

            .show-info .poster {
                outline: 6px solid #88b7d5;
                outline-offset: -6px;
            }

            .show-info .plus-wrapper {
                position: absolute;
                left: 0%;
                background-color: rgba(0, 0, 0, 0.8);
                color: #fff;
                width: 98.4%;
                padding: 10px;
                margin-top: 4px;
                overflow: hidden;
            }

            .plus {
                max-width: 1000px;
                margin: 0 auto;
            }

            .episodesDownloaded {
                float: right;
                width: 30%;
            }

            .description {
                clear: both;
                margin: 5px auto;
                color: deepskyblue;
                letter-spacing: 0.5px;
                font-style: italic;
            }
        </style>

        <style id="style--index">
            .sector {
                margin-left: 25px;
            }

            .sector-title {
                font-size: 3em;
                clear: both;
            }

            .sector-title + .anime-list {
                border-bottom: 1px solid rgba(0,0,0,0.1);
                padding-left: 25px;
                padding-top: 15px;
            }

            .sector-wrapper--index .anime-list {
                width: 98%;
            }
        </style>
    </head>
    <body>
        <!-- Menu Button -->
        <div class="menu--button">
            <button id="c-button--slide-top" class="c-button">Menu</button>
            <div id="ruler" class="hidden"></div>
        </div>

        <!-- Content -->
        <section id="wrapper">
            <div id="anime-wrapper">
                <ul class="anime-list"></ul>
            </div>
        </section>

        <!-- Menu -->
        <nav id="c-menu--slide-top" class="c-menu c-menu--slide-top">
            <button class="c-menu__close">Close</button> <!-- Close menu -->
            <div class="switch__container">
                <input id="switch-index" class="switch switch--shadow" type="checkbox">
                <label for="switch-index">
                    <span class="button-label--title">Show Index</span>
                </label>
            </div>
        </nav>

        <!-- Mask for Menu -->
        <div id="c-mask" class="c-mask"></div>

        <!-- ===== EOF ===== -->

        <script type="text/javascript" src="./data-json.js" id="js-all-data"></script>

        <!-- Template -->
        <script id="template_item" type="x-template">
            <object class="poster img-object">
                <img src="data:image/gif;base64,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" class="poster img-fallback"/>
            </object>
            <div class="plus-wrapper">
                <ul class="plus">
                    <li class="name"><span class="info-title">Nome: </span></li>
                    <li class="episodesDownloaded"><span class="info-title">Episodios Baixados: </span></li>
                    <li class="totalEpisodes"><span class="info-title">Total de Episodios: </span></li>
                    <li class="description"><span class="info-title">Descrição: </span></li>
                    <li class="genre"><span class="info-title">Genero: </span></li>
                    <li class="season"><span class="info-title">Temporada: </span></li>
                    <li class="othersSeasons"><span class="info-title">Outras Temporadas: </span></li>
                    <li class="obs"><span class="info-title">Obs: </span></li>
                    <li class="rate"><span class="info-title">Nota: </span></li>
                </ul>
            </div>
        </script>

        <!-- Put all animes on html -->
        <script type="text/javascript" id="js-create-catalog">
            var rulerDiv = document.getElementById('ruler');

            for(var key in data){
                rulerDiv.innerHTML += '<span><a href="#' + key + '">'+ key + '</span></a>';
                var el = document.getElementsByClassName('anime-list')[0];

                for( var i = 0; i < Object(data[key]).length; i++){
                    tmpl_content(data[key][i], el, key);
                }
            }

            function tmpl_content(arr, dad, dataGroup){
                var template = document.getElementById("template_item").innerHTML,
                          el = document.createElement('li');
                          el.className = 'anime-item'
                          el.setAttribute('data-group', dataGroup);
                el.innerHTML = template;

                for (var dataKey in arr){
                    if(el.getElementsByClassName(dataKey).length > 0){
                        if(arr[dataKey].length <= 0){
                            var elDataKey = el.getElementsByClassName(dataKey)[0];
                            elDataKey.parentElement.removeChild(elDataKey);
                        }else{
                            if(dataKey == 'genre'){
                                var value = '';
                                for( var genreData in arr[dataKey]){
                                    value += arr[dataKey][genreData] + ', ';
                                }
                                value = value.slice(0, -2);
                            }else{
                                var value = arr[dataKey];
                            }

                            el.getElementsByClassName(dataKey)[0].innerHTML += value;
                        }
                    }else {
                        if( dataKey == 'path'){
                            el.getElementsByTagName("object")[0].data = '../Animes' + arr.path + '/thumb.png';
                        }else{
                            child = document.createElement('li');
                            child.className = dataKey;
                            child.innerHTML = dataKey + ': ' + arr[dataKey];
                            el.getElementsByClassName('plus')[0].append(child);
                        }
                    }
                }
                if(el.getElementsByTagName('object')[0].data == ''){
                    el.getElementsByTagName('object')[0].data = '../Animes/' + toTitleCase(arr['name']) + '/thumb.png';
                }

                el.id = arr['name'];

                dad.appendChild(el);
            };

            function toTitleCase(str){
                str2 = str.toLowerCase()
                str3 = str.charAt(0).toUpperCase() + str2.slice(1);
                return str3.replace(/\?/gi, '');
            };
        </script>

        <!-- Change info view -->
        <script id="js-show-infos">
            var animes = document.querySelectorAll('.anime-item');

            animes.forEach(function(element, index, array){
                element.addEventListener('click', function(e){
                    if(element.className.indexOf('show-info') > -1){
                        element.classList.remove('show-info');
                    }else{
                        var showInfo = document.querySelector('.show-info');
                        if(showInfo != null){
                            showInfo.classList.remove('show-info');
                        }
                        element.classList.add('show-info');
                    }
                })
            });
        </script>

        <!-- Change index view -->
        <script type="text/javascript" id="js-switch-index">
            var switchFunction = function(e){
                var switchButton = e.checked;
                var ruler = document.getElementById('ruler');

                if(switchButton){

                    document.body.classList.add('has-regua');
                    ruler.classList.remove('hidden');
                    var rulerItems = ruler.querySelectorAll('a');
                    rulerItems.forEach(function(letterDiv){
                        var letter = letterDiv.innerHTML;

                        var sectorWrapper = document.createElement('div');
                            sectorWrapper.id = letter;
                            sectorWrapper.className = 'sector-wrapper sector-wrapper--index';
                            sectorWrapper.innerHTML = '<span class="sector-title">' + letter + '</span>';


                        var groupLetter = document.createElement('ul');
                        groupLetter.className = 'anime-list';
                        animes = document.querySelectorAll('[data-group="' + letter + '"]');
                        animes.forEach(function(anime){
                            groupLetter.appendChild(anime);
                        });
                        sectorWrapper.appendChild(groupLetter);
                        document.getElementById('anime-wrapper').appendChild(sectorWrapper);
                    });

                } else {

                    document.body.classList.remove('has-regua');
                    ruler.classList.add('hidden');
                    animes = document.querySelectorAll('[data-group]');
                    animes.forEach(function(anime){
                        document.getElementsByClassName('anime-list')[0].appendChild(anime);
                    });
                    letterGroupWrapper = document.querySelectorAll('.sector-wrapper');

                    letterGroupWrapper.forEach(function(e){
                        e.parentElement.removeChild(e);
                    });
                }
            };

            var button = document.getElementById("switch-index");
            button.addEventListener("change", function(e){switchFunction(e.target)}, false);
            if(window.location.hash != ""){
                button.checked = true;
                switchFunction(button);
            }
        </script>

        <!-- Keyboard events -->
        <script type="text/javascript" id="js-keyboard">
            document.onkeydown = function(evt) {
                evt = evt || window.event;
                var showInfo = document.querySelector('.show-info');
                if(showInfo != null){
                    var animeItem =  document.querySelectorAll('.anime-item');
                    switch(evt.keyCode) {
                        case 27:
                            // 27 - ESC
                            showInfo.classList.remove('show-info');
                        break;
                        case 37:
                            // 37 - left
                            var sibling = findSibling(animeItem, showInfo, 37);
                            if(sibling != null){
                                smoothScrollTo(sibling.offsetTop - 10);
                                sibling.classList.add('show-info');
                                showInfo.classList.remove('show-info');
                            }
                        break;
                        case 39:
                            // 39 - right
                            var sibling = findSibling(animeItem, showInfo, 39);
                            if(sibling != null){
                                smoothScrollTo(sibling.offsetTop - 10);
                                sibling.classList.add('show-info');
                                showInfo.classList.remove('show-info');
                            }
                        break;
                    }
                }
            };

            function findSibling(animeItem, showInfo, key){
                var found = false;
                for(var animeKey in animeItem){
                    if(animeItem[animeKey] == showInfo){
                        found = true;
                        break;
                    }
                };

                if(found){
                    if(key == 39){
                        return animeItem[parseInt(animeKey) + 1];
                    }else{
                        return animeItem[parseInt(animeKey) - 1];
                    }
                }
                return null;
            };
        </script>

        <!-- Smooth Scroll -->
        <script type="text/javascript" id="js-smooth-scroll">
            window.smoothScrollTo = (function () {
              var timer, start, factor;

              return function (target, duration) {
                var offset = window.pageYOffset,
                    delta  = target - window.pageYOffset; // Y-offset difference
                duration = duration || 1000;              // default 1 sec animation
                start = Date.now();                       // get start time
                factor = 0;

                if( timer ) {
                  clearInterval(timer); // stop any running animations
                }

                function step() {
                  var y;
                  factor = (Date.now() - start) / duration; // get interpolation factor
                  if( factor >= 1 ) {
                    clearInterval(timer); // stop animation
                    factor = 1;           // clip to max 1.0
                  }
                  y = factor * delta + offset;
                  window.scrollBy(0, y - window.pageYOffset);
                }

                timer = setInterval(step, 10);
                return timer;
              };
            }());

        </script>

        <!-- Js Menu -->
        <script type="text/javascript" id="js-menu">
            (function(window) {

              'use strict';

              /**
               * Extend Object helper function.
               */
              function extend(a, b) {
                for(var key in b) {
                  if(b.hasOwnProperty(key)) {
                    a[key] = b[key];
                  }
                }
                return a;
              }

              /**
               * Each helper function.
               */
              function each(collection, callback) {
                for (var i = 0; i < collection.length; i++) {
                  var item = collection[i];
                  callback(item);
                }
              }

              /**
               * Menu Constructor.
               */
              function Menu(options) {
                this.options = extend({}, this.options);
                extend(this.options, options);
                this._init();
              }

              /**
               * Menu Options.
               */
              Menu.prototype.options = {
                wrapper: '#o-wrapper',          // The content wrapper
                type: 'slide-left',             // The menu type
                menuOpenerClass: '.c-button',   // The menu opener class names (i.e. the buttons)
                maskId: '#c-mask'               // The ID of the mask
              };

              /**
               * Initialise Menu.
               */
              Menu.prototype._init = function() {
                this.body = document.body;
                this.wrapper = document.querySelector(this.options.wrapper);
                this.mask = document.querySelector(this.options.maskId);
                this.menu = document.querySelector('#c-menu--' + this.options.type);
                this.closeBtn = this.menu.querySelector('.c-menu__close');
                this.menuOpeners = document.querySelectorAll(this.options.menuOpenerClass);
                this._initEvents();
              };

              /**
               * Initialise Menu Events.
               */
              Menu.prototype._initEvents = function() {
                // Event for clicks on the close button inside the menu.
                this.closeBtn.addEventListener('click', function(e) {
                  e.preventDefault();
                  this.close();
                }.bind(this));

                // Event for clicks on the mask.
                this.mask.addEventListener('click', function(e) {
                  e.preventDefault();
                  this.close();
                }.bind(this));
              };

              /**
               * Open Menu.
               */
              Menu.prototype.open = function() {
                this.body.classList.add('has-active-menu');
                this.wrapper.classList.add('has-' + this.options.type);
                this.menu.classList.add('is-active');
                this.mask.classList.add('is-active');
                this.disableMenuOpeners();
              };

              /**
               * Close Menu.
               */
              Menu.prototype.close = function() {
                this.body.classList.remove('has-active-menu');
                this.wrapper.classList.remove('has-' + this.options.type);
                this.menu.classList.remove('is-active');
                this.mask.classList.remove('is-active');
                this.enableMenuOpeners();
              };

              /**
               * Disable Menu Openers.
               */
              Menu.prototype.disableMenuOpeners = function() {
                each(this.menuOpeners, function(item) {
                  item.disabled = true;
                });
              };

              /**
               * Enable Menu Openers.
               */
              Menu.prototype.enableMenuOpeners = function() {
                each(this.menuOpeners, function(item) {
                  item.disabled = false;
                });
              };

              /**
               * Add to global namespace.
               */
              window.Menu = Menu;

            })(window);

            var slideTop = new Menu({
              wrapper: '#wrapper',
              type: 'slide-top',
              menuOpenerClass: '.c-button',
              maskId: '#c-mask'
            });

            var slideTopBtn = document.querySelector('#c-button--slide-top');

            slideTopBtn.addEventListener('click', function(e) {
              e.preventDefault;
              slideTop.open();
            });
        </script>

        <!-- ===== End of Scripts ===== -->
    </body>
</html>
